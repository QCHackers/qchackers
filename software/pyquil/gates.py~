from pyquil.quil import Program
#from pyquil.api import QPUConnection
from pyquil.api import QVMConnection
from pyquil.gates import *
from numpy import pi

#qpu = QPUConnection(device_name='19Q-Acorn')
qvm = QVMConnection()


p = Program()
p.inst("""DEFGATE CRY(%theta):
    1, 0, 0, 0
    0, 1, 0, 0
    0, 0, cos(%theta/2), -sin(%theta/2)
    0, 0, sin(%theta/2), cos(%theta/2)""")
p.inst(H(3))
p.inst(CNOT(3, 2))
p.inst(CNOT(2, 1))
p.inst("CRY(pi/4) 0 2")



print("EXPERIMENT 3")
result = qvm.run_and_measure(exp, [0,1,2, 3], 10)
print(result)
